{% extends "base.html" %}

{% block title %}Seu Dashboard{% endblock %}

{% block content %}
<div class="container">
    <h1 class="main-title">Seu Dashboard, {{ user.username }}!</h1>
    <p>Acesse suas partidas em andamento.</p>
    <hr>

    {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}

    <div class="partidas-list">
    {% for info in info_partidas_jogador %}
        <div class="partida-card">
            <div class="partida-header">
                <h3>{{ info.partida.nome }}</h3>
                <span>Sua Empresa: <strong>{{ info.jogador_partida.nome_empresa_jogador }}</strong></span>
            </div>
            <div class="partida-body">
                <p>Status: Rodada {{ info.rodada_ativa.numero|default:"1" }} em andamento</p>
                <div class="partida-actions">
                    <a href="{% url 'partida_detalhe' info.partida.id %}" class="btn btn-primary">Entrar na Sala da Partida</a>
                </div>
            </div>
        </div>
    {% empty %}
        <p>Você não está em nenhuma partida. <a href="{% url 'lobby' %}">Vá para o Lobby para entrar em uma.</a></p>
    {% endfor %}
    </div>
</div>
{% endblock %}
